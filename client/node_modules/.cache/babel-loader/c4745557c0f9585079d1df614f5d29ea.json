{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SupportChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SupportChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SupportChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SupportChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SupportChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SupportChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SupportChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SupportChildrenV2.0\\\\client\\\\src\\\\components\\\\L2View.js\";\nimport React, { Fragment, Component } from 'react';\nimport Web3 from 'web3';\nimport { MaticPOSClient } from '@maticnetwork/maticjs';\nimport WalletConnectProvider from \"@maticnetwork/walletconnect-provider\";\n\nvar config = require(\"../config\");\n\nvar L2View = /*#__PURE__*/function (_Component) {\n  _inherits(L2View, _Component);\n\n  function L2View(props) {\n    var _this;\n\n    _classCallCheck(this, L2View);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(L2View).call(this, props));\n    _this.loadWeb3 = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!window.ethereum) {\n                _context.next = 6;\n                break;\n              }\n\n              window.web3 = new Web3(window.ethereum);\n              _context.next = 4;\n              return window.ethereum.enable();\n\n            case 4:\n              _context.next = 7;\n              break;\n\n            case 6:\n              if (window.web3) {\n                window.web3 = new Web3(window.web3.currentProvider);\n              } else {\n                window.alert(\"Non-Ethereum browser detected. You should consider trying MetaMask!\");\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.loadBlockchainData = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var maticProvider, ethereumProvider, web3, accounts, networkId;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setState({\n                loading: false\n              });\n\n              maticProvider = new WalletConnectProvider({\n                host: config.l2.MATIC_RPC,\n                callbacks: {\n                  onConnect: console.log(\"matic connected\"),\n                  onDisconnect: console.log(\"matic disconnected!\")\n                }\n              });\n              ethereumProvider = new WalletConnectProvider({\n                host: config.l2.ETHEREUM_RPC,\n                callbacks: {\n                  onConnect: console.log(\"mainchain connected\"),\n                  onDisconnect: console.log(\"mainchain disconnected\")\n                }\n              });\n\n              _this.setState({\n                maticProvider: maticProvider,\n                ethereumProvider: ethereumProvider\n              });\n\n              web3 = window.web3;\n              _context2.next = 7;\n              return web3.eth.getAccounts();\n\n            case 7:\n              accounts = _context2.sent;\n\n              _this.setState({\n                account: accounts[0]\n              });\n\n              _context2.next = 11;\n              return web3.eth.net.getId();\n\n            case 11:\n              networkId = _context2.sent;\n\n              _this.setState({\n                networkId: networkId\n              });\n\n              if (networkId === config.l2.ETHEREUM_CHAINID) {\n                _this.setState({\n                  loading: false\n                });\n              } else if (networkId === config.l2.MATIC_CHAINID) {\n                _this.setState({\n                  loading: false\n                });\n              } else {\n                window.alert(\" switch to  Matic or Ethereum network\");\n              }\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.depositEther = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var maticPoSClient, x, x1;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              maticPoSClient = posClientParent();\n              x = _this.state.inputValue * 1000000000000000000; // 18 decimals\n\n              x1 = x.toString();\n              _context3.next = 5;\n              return maticPoSClient.depositEtherForUser(_this.state.account, x1, {\n                from: _this.state.account\n              });\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    _this.burnEther = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var maticPoSClient, x, x1;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              maticPoSClient = posClientChild();\n              x = _this.state.inputValue * 1000000000000000000;\n              x1 = x.toString();\n              _context4.next = 5;\n              return maticPoSClient.burnERC20(config.l2.posWETH, x1, {\n                from: _this.state.account\n              }).then(function (res) {\n                console.log(res.transactionHash);\n\n                _this.setState({\n                  transactionHash: res.transactionHash\n                });\n              });\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    _this.exitEther = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var maticPoSClient;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              maticPoSClient = posClientParent();\n              _context5.next = 3;\n              return maticPoSClient.exitERC20(_this.state.inputValue, {\n                from: _this.state.account\n              }).then(function (res) {\n                console.log(\"exit o/p\", res);\n              });\n\n            case 3:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    _this.depositERC20 = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var maticPoSClient, x, x1;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              maticPoSClient = posClientParent();\n              x = _this.state.inputValue * 1000000000000000000; // 18 decimals\n\n              x1 = x.toString();\n              _context6.next = 5;\n              return maticPoSClient.approveERC20ForDeposit(config.l2.posRootERC20, x1, {\n                from: _this.state.account\n              });\n\n            case 5:\n              _context6.next = 7;\n              return maticPoSClient.depositERC20ForUser(config.l2.posRootERC20, account, x1, {\n                from: _this.state.account\n              });\n\n            case 7:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    _this.burnERC20 = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      var maticPoSClient, x, x1;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              maticPoSClient = posClientChild();\n              x = _this.state.inputValue * 1000000000000000000;\n              x1 = x.toString();\n              _context7.next = 5;\n              return maticPoSClient.burnERC20(config.l2.posChildERC20, x1, {\n                from: _this.state.account\n              }).then(function (res) {\n                _this.setState({\n                  transactionHash: res.transactionHash\n                });\n              });\n\n            case 5:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    _this.exitERC20 = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      var maticPoSClient;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              maticPoSClient = posClientParent();\n              _context8.next = 3;\n              return maticPoSClient.exitERC20(_this.state.inputValue, {\n                from: _this.state.account\n              }).then(function (res) {\n                console.log(\"exit o/p\", res);\n              });\n\n            case 3:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    _this.onchange = function (e) {\n      setInputValue(e.target.value);\n\n      _this.setState({\n        inputValue: e.target.value\n      });\n    };\n\n    _this.state = {\n      Networkid: 0,\n      account: \"\",\n      inputValue: \"\",\n      burnHash: \"\",\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(L2View, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"Ether\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.depositEther,\n        disabled: this.state.Networkid !== 0 && this.state.Networkid === config.l2.MATIC_CHAINID ? true : false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }, \"Deposit\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.burnEther,\n        disabled: this.state.Networkid !== 0 && this.state.Networkid === config.l2.ETHEREUM_CHAINID ? true : false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }\n      }, \"burn\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.exitEther,\n        disabled: this.state.Networkid !== 0 && this.state.Networkid === config.l2.ETHEREUM_CHAINID ? false : true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }\n      }, \"exit\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"inputValue\",\n        type: \"text\",\n        placeholder: \"value\",\n        name: \"inputValue\",\n        value: this.state.inputValue,\n        onChange: this.onchange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        id: \"burnHash\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      }, this.state.burnHash));\n    }\n  }]);\n\n  return L2View;\n}(Component);\n\nexport default L2View;","map":{"version":3,"sources":["C:/Users/Luka/Desktop/SupportChildrenV2.0/client/src/components/L2View.js"],"names":["React","Fragment","Component","Web3","MaticPOSClient","WalletConnectProvider","config","require","L2View","props","loadWeb3","window","ethereum","web3","enable","currentProvider","alert","loadBlockchainData","setState","loading","maticProvider","host","l2","MATIC_RPC","callbacks","onConnect","console","log","onDisconnect","ethereumProvider","ETHEREUM_RPC","eth","getAccounts","accounts","account","net","getId","networkId","ETHEREUM_CHAINID","MATIC_CHAINID","depositEther","maticPoSClient","posClientParent","x","state","inputValue","x1","toString","depositEtherForUser","from","burnEther","posClientChild","burnERC20","posWETH","then","res","transactionHash","exitEther","exitERC20","depositERC20","approveERC20ForDeposit","posRootERC20","depositERC20ForUser","posChildERC20","onchange","e","setInputValue","target","value","Networkid","burnHash"],"mappings":"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","sourcesContent":["import React, {Fragment, Component} from 'react';\r\nimport Web3 from 'web3';\r\nimport { MaticPOSClient } from '@maticnetwork/maticjs'\r\nimport WalletConnectProvider from \"@maticnetwork/walletconnect-provider\";\r\n\r\nconst config = require(\"../config\");\r\n\r\n\r\nclass L2View extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            Networkid: 0,\r\n            account: \"\",\r\n            inputValue: \"\",\r\n            burnHash: \"\",\r\n            loading: true\r\n\r\n        }\r\n    }\r\n\r\n    loadWeb3 = async () => {\r\n        if (window.ethereum) {\r\n          window.web3 = new Web3(window.ethereum);\r\n          await window.ethereum.enable();\r\n        } else if (window.web3) {\r\n          window.web3 = new Web3(window.web3.currentProvider);\r\n        } else {\r\n          window.alert(\r\n            \"Non-Ethereum browser detected. You should consider trying MetaMask!\"\r\n          );\r\n        }\r\n    }\r\n\r\n    loadBlockchainData = async () => {\r\n\r\n        this.setState({\r\n            loading: false\r\n        })\r\n\r\n        const maticProvider = new WalletConnectProvider({\r\n          host: config.l2.MATIC_RPC,\r\n          callbacks: {\r\n            onConnect: console.log(\"matic connected\"),\r\n            onDisconnect: console.log(\"matic disconnected!\"),\r\n          },\r\n        });\r\n    \r\n        const ethereumProvider = new WalletConnectProvider({\r\n          host: config.l2.ETHEREUM_RPC,\r\n          callbacks: {\r\n            onConnect: console.log(\"mainchain connected\"),\r\n            onDisconnect: console.log(\"mainchain disconnected\"),\r\n          },\r\n        });\r\n        \r\n        this.setState({\r\n            maticProvider: maticProvider,\r\n            ethereumProvider: ethereumProvider\r\n        })\r\n\r\n        const web3 = window.web3;\r\n    \r\n        const accounts = await web3.eth.getAccounts();\r\n        this.setState({account: accounts[0]});\r\n\r\n        const networkId = await web3.eth.net.getId();\r\n        this.setState({networkId: networkId});\r\n    \r\n        if (networkId === config.l2.ETHEREUM_CHAINID) {\r\n            this.setState({loading: false});\r\n        } else if (networkId === config.l2.MATIC_CHAINID) {\r\n            this.setState({loading: false});\r\n        } else {\r\n          window.alert(\" switch to  Matic or Ethereum network\");\r\n        }\r\n    }\r\n\r\n    depositEther = async () => {\r\n        const maticPoSClient = posClientParent();\r\n        const x = this.state.inputValue * 1000000000000000000; // 18 decimals\r\n        const x1 = x.toString();\r\n    \r\n        await maticPoSClient.depositEtherForUser(this.state.account, x1, {\r\n          from: this.state.account,\r\n        });\r\n    }\r\n\r\n    burnEther = async () => {\r\n        const maticPoSClient = posClientChild();\r\n        const x = this.state.inputValue * 1000000000000000000;\r\n        const x1 = x.toString();\r\n        await maticPoSClient\r\n          .burnERC20(config.l2.posWETH, x1, {\r\n            from: this.state.account,\r\n          })\r\n          .then((res) => {\r\n            console.log(res.transactionHash);\r\n            this.setState({transactionHash: res.transactionHash});\r\n          });\r\n    }\r\n\r\n    exitEther = async () => {\r\n        const maticPoSClient = posClientParent();\r\n        await maticPoSClient\r\n          .exitERC20(this.state.inputValue, {\r\n            from: this.state.account,\r\n          })\r\n          .then((res) => {\r\n            console.log(\"exit o/p\", res);\r\n          });\r\n    }\r\n\r\n    // POS ERC20 functionality\r\n\r\n    depositERC20 = async () => {\r\n        const maticPoSClient = posClientParent();\r\n        const x = this.state.inputValue * 1000000000000000000; // 18 decimals\r\n        const x1 = x.toString();\r\n        await maticPoSClient.approveERC20ForDeposit(config.l2.posRootERC20, x1, {\r\n            from: this.state.account,\r\n        });\r\n        await maticPoSClient.depositERC20ForUser(config.l2.posRootERC20, account, x1, {\r\n            from: this.state.account,\r\n        });\r\n    };\r\n\r\n    burnERC20 = async () => {\r\n        const maticPoSClient = posClientChild();\r\n        const x = this.state.inputValue * 1000000000000000000;\r\n        const x1 = x.toString();\r\n        await maticPoSClient\r\n        .burnERC20(config.l2.posChildERC20, x1, {\r\n            from: this.state.account,\r\n        })\r\n        .then((res) => {\r\n            this.setState({transactionHash: res.transactionHash});\r\n        });\r\n    }\r\n\r\n    exitERC20 = async () => {\r\n        const maticPoSClient = posClientParent();\r\n        await maticPoSClient\r\n        .exitERC20(this.state.inputValue, {\r\n            from: this.state.account,\r\n        })\r\n        .then((res) => {\r\n            console.log(\"exit o/p\", res);\r\n        });\r\n    }\r\n\r\n    onchange = (e) => {\r\n        setInputValue(e.target.value);\r\n        this.setState({inputValue: e.target.value});\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div\r\n            id=\"Ether\"\r\n            >\r\n            <button\r\n              onClick={this.depositEther}\r\n              disabled={\r\n                this.state.Networkid !== 0 && this.state.Networkid === config.l2.MATIC_CHAINID\r\n                  ? true\r\n                  : false\r\n              }\r\n            >\r\n              Deposit\r\n            </button>\r\n\r\n            <button\r\n              onClick={this.burnEther}\r\n              disabled={\r\n                this.state.Networkid !== 0 && this.state.Networkid === config.l2.ETHEREUM_CHAINID\r\n                  ? true\r\n                  : false\r\n              }\r\n            >\r\n              burn\r\n            </button>\r\n\r\n            <button\r\n              onClick={this.exitEther}\r\n              disabled={\r\n                this.state.Networkid !== 0 && this.state.Networkid === config.l2.ETHEREUM_CHAINID\r\n                  ? false\r\n                  : true\r\n              }\r\n            >\r\n              exit\r\n            </button>\r\n\r\n            <br />\r\n            <input\r\n              id=\"inputValue\"\r\n              type=\"text\"\r\n              placeholder=\"value\"\r\n              name=\"inputValue\"\r\n              value={this.state.inputValue}\r\n              onChange={this.onchange}\r\n              required\r\n            />\r\n            <p id=\"burnHash\">{this.state.burnHash}</p>\r\n          </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default L2View;"]},"metadata":{},"sourceType":"module"}